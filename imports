#!/bin/bash

die () {
    echo "$*"
    exit 1
}

INPUT="$1"
if [[ -z "$INPUT" ]]; then
	die "usage: imports <filename>"
fi

function replace () {
	local A=$1
	local B=$2
	sed -i "s/^import static $A/import static $B/g" "$INPUT"
	sed -i "s/^import $A/import $B/g" "$INPUT"
}

function delete () {
	local P="/${1}$/d"
	echo "$P"
	sed -i "$P" $INPUT
}

replace com.google.auto.common. io.jbock.auto.common.
replace com.google.common.base. dagger.internal.codegen.base.
replace androidx.room.compiler.processing.compat.XConverters dagger.internal.codegen.xprocessing.XConverters
replace com.squareup.javapoet. io.jbock.javapoet.
replace androidx.room.compiler.processing. dagger.internal.codegen.xprocessing.
replace com.google.common.collect. dagger.internal.codegen.collect.
replace com.google.auto.common. io.jbock.auto.common.
replace javax.inject. jakarta.inject.

delete "import com.google.errorprone.annotations.CanIgnoreReturnValue;"
